<ng-template #contenido let-modal>
  <div class="modal-header">
    <p>Ficha de Alumno</p>
    <p>{{accion}}</p>
  </div>
  <div class="modal-body">
    <form (ngSubmit)="guardar()" [formGroup]="formAlumno" autocomplete="off">
      <div class="row">
        <div class="card">
          <div class="card-header">Datos Personales</div>
          <div class="card-body">
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="">Código Modular</label>
                  <input [(ngModel)]="alumno.alu_codigomod" type="text" class="form-control form-control-sm"
                    formControlName="codModular" />
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">DNI</label>
                  <input [(ngModel)]="alumno.alu_dni" type="text" class="form-control form-control-sm"
                    formControlName="dni" />
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Nro Matricula</label>
                  <input type="text" class="form-control form-control-sm" formControlName="nroMatricula" />
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-3">
                <div class="form-group">
                  <label for="">Apellido Paterno</label>
                  <input [(ngModel)]="alumno.alu_apellidop" type="text" class="form-control form-control-sm"
                    formControlName="apPaterno" />
                </div>
              </div>
              <div class="col-3">
                <div class="form-group">
                  <label for="">Apellido Materno</label>
                  <input [(ngModel)]="alumno.alu_apellidom" type="text" class="form-control form-control-sm"
                    formControlName="apMaterno" />
                </div>
              </div>
              <div class="col-6">
                <div class="form-group">
                  <label for="">Nombres</label>
                  <input [(ngModel)]="alumno.alu_nombres" type="text" class="form-control form-control-sm"
                    formControlName="nombres" />
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-2">
                <div class="form-group">
                  <label for="">Sexo</label>
                  <select [(ngModel)]="alumno.alu_sexo" class="form-control form-control-sm" formControlName="sexo">
                    <option value="F">Femenino</option>
                    <option value="M">Masculino</option>
                  </select>
                </div>
              </div>
              <div class="col-3">
                <div class="form-group">
                  <label for="">Fecha de Nac.</label>
                  <input [(ngModel)]="alumno.alu_fechanac" type="date" class="form-control form-control-sm"
                    formControlName="fechaNacimiento" />
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">País</label>
                  <select [(ngModel)]="alumno.alu_pais" class="form-control form-control-sm" formControlName="pais">
                    <option value="01">Perú</option>
                    <option value="02">Chile</option>
                  </select>
                </div>
              </div>
              <div class="col-1">
                <div class="form-group">
                  <label for="">Escala</label>
                  <input [(ngModel)]="alumno.alu_escala" type="text" class="form-control form-control-sm"
                    formControlName="escala" />
                </div>
              </div>
              <div class="col-2">
                <div class="form-group">
                  <label for="">Año Ingreso</label>
                  <input [(ngModel)]="alumno.alu_anioingreso" type="text" class="form-control form-control-sm"
                    formControlName="añoIngreso" />
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="">Departamento</label>
                  <select [(ngModel)]="alumno.department_id" class="form-control form-control-sm"
                    formControlName="depAlumno" (change)="departamentoD()">
                    <option [value]="departamento.id" *ngFor="let departamento of departamentos">{{departamento.name}}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Provincia</label>
                  <select [(ngModel)]="alumno.province_id" class="form-control form-control-sm"
                    formControlName="provAlumno" (change)="provinciaD()">
                    <option [value]="provincia.id" *ngFor="let provincia of provincias">{{provincia.name}}</option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Distrito</label>
                  <select [(ngModel)]="alumno.district_id" class="form-control form-control-sm"
                    formControlName="distAlumno">
                    <option [value]="distrito.id" *ngFor="let distrito of distritos">{{distrito.name}}</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="">Lengua Materna</label>
                  <select [(ngModel)]="alumno.alu_lenguamat" class="form-control form-control-sm"
                    formControlName="lenguaMaterna">
                    <option value="F">CASTELLANO</option>
                    <option value="M">QUECHUA</option>
                    <option value="C">AYMARA</option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Estado Civil</label>
                  <select [(ngModel)]="alumno.alu_estadocivil" class="form-control form-control-sm"
                    formControlName="estadoCivil">
                    <option value="F">SOLTERO</option>
                    <option value="M">CASADO</option>
                    <option value="C">CONVIVIENTE</option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Religión</label>
                  <select [(ngModel)]="alumno.alu_religion" class="form-control form-control-sm"
                    formControlName="religion">
                    <option value="F">CATÓLICO</option>
                    <option value="M">EVANGELICO</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="">Fecha de Bautizo</label>
                  <input [(ngModel)]="alumno.alu_fechabautizo" type="date" class="form-control form-control-sm"
                    formControlName="fechaBautizo" />
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Parroquia de Bautizo</label>
                  <input [(ngModel)]="alumno.alu_parroquiab" type="text" class="form-control form-control-sm"
                    formControlName="parroquia" />
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Colegio Procedencia</label>
                  <input [(ngModel)]="alumno.alu_colprocedencia" type="text" class="form-control form-control-sm"
                    formControlName="colegioProc" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="card" style="width: 100%">
          <div class="card-header">Datos de Domicilio</div>
          <div class="card-body">
            <div class="row">
              <div class="col-8">
                <div class="form-group">
                  <label for="">Dirección</label>
                  <input type="text" class="form-control form-control-sm" formControlName="direccion" />
                </div>
              </div>
              <div class="col-4">
                <div class="form-group">
                  <label for="">Telefono</label>
                  <input type="text" class="form-control form-control-sm" formControlName="telefono" />
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="">Departamento</label>
                  <select class="form-control form-control-sm" formControlName="depDomicilio" onchange="provAlumno()">
                    <option [value]="departamento.id" *ngFor="let departamento of departamentos">{{departamento.name}}
                    </option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Provincia</label>
                  <select class="form-control form-control-sm" formControlName="provDomicilio">
                    <option value="F">Trujillo</option>
                    <option value="M">Virú</option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Distrito</label>
                  <select class="form-control form-control-sm" formControlName="distDomicilio">
                    <option value="F">Trujillo</option>
                    <option value="M">Porvenir</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="card" style="width: 100%;">
          <div class="card-header">
            Datos de Servicios y Otros del Domicilio
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="">Medio de Transporte</label>
                  <select class="form-control form-control-sm" formControlName="transporte">
                    <option value="F">La Libertad</option>
                    <option value="M">Lima</option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Demora en llegar</label>
                  <input type="text" class="form-control form-control-sm" formControlName="tiempoDemora" />
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Material</label>
                  <select class="form-control form-control-sm" formControlName="materialVivienda">
                    <option value="F">Trujillo</option>
                    <option value="M">Porvenir</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-group">
                  <label for="">Energia Electrica</label>
                  <select class="form-control form-control-sm" formControlName="electricidad">
                    <option value="F">La Libertad</option>
                    <option value="M">Lima</option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Agua potable</label>
                  <select class="form-control form-control-sm" formControlName="aguaPotable">
                    <option value="F">Trujillo</option>
                    <option value="M">Virú</option>
                  </select>
                </div>
              </div>
              <div class="col">
                <div class="form-group">
                  <label for="">Desagüe</label>
                  <select class="form-control form-control-sm" formControlName="desague">
                    <option value="F">Trujillo</option>
                    <option value="M">Porvenir</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">Guardar</button>
        <button type="button" class="btn btn-secondary" (click)="cerrarModal()">Cerrar</button>
      </div>
    </form>
  </div>
</ng-template>

<div class="card">
  <div class="card-header">LISTA DE ALUMNOS</div>
  <div class="card-body">
    <div class="row mb-1">
      <div class="col d-flex">
        <button type="button" class="btn btn-primary btn-sm ml-auto" (click)="opensave(contenido)">
          <i class="fas fa-plus-square"></i>
        </button>
        <button type="button" class="btn btn-warning btn-sm" (click)="openedit(contenido)">
          <i class="fas fa-edit"></i>
        </button>
        <button type="button" class="btn btn-danger btn-sm" (click)="eliminar()">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    </div>
    <div id="myGrid" class="ag-theme-alpine" style="width: 100%; height: 100%">
      <ag-grid-angular 
        #agGrid
        style="width: 100%px; height: 500px" 
        class="ag-theme-alpine" 
        [rowData]="rowData"
        [columnDefs]="columnDefs" 
        [defaultColDef]="defaultColDef" 
        rowSelection="single"
        (gridReady)="OnGridReady($event)">
      </ag-grid-angular>
    </div>
  </div>
</div>